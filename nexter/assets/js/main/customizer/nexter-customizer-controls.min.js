(function(a){'use strict';a(window).on("load",function(){a("html").addClass("background-colorpicker-ready")}),wp.customize.controlConstructor["nxt-background"]=wp.customize.Control.extend({ready:function(){var b=this,c=b.setting._value,d=b.container.find(".nxt-color-control");(_.isUndefined(c["bg-image"])||""===c["bg-image"])&&b.container.find(".nxt-control-background > .nxt-bg-size, .nxt-control-background > .nxt-bg-position, .nxt-control-background > .nxt-bg-repeat, .nxt-control-background > .nxt-bg-attachment").addClass("hidden"),b.container.on("click",".nxt-bg-reset",function(){var c=a(this).closest(".nxt-bg-type-list"),d=c.find("input");d.prop("checked",!1),b.setData("bg-type",""),d.trigger("change"),b.container.find(".nxt-bg-image").addClass("hidden")}),d.wpColorPicker({change:function(){a("html").hasClass("background-colorpicker-ready")&&setTimeout(function(){b.setData("bg-color",d.val())},100)},clear:function(c){var d=a(c.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0];d&&b.setData("bg-color","")}}),b.container.on("change",".nxt-bg-type-list input",function(c){c.preventDefault();var d=a(this).val();b.setData("bg-type",d),"color"===d?(b.container.find(".nxt-bg-color").removeClass("hidden"),b.container.find(".nxt-bg-image").addClass("hidden"),b.container.find(".nxt-control-background > .nxt-bg-size, .nxt-control-background > .nxt-bg-position, .nxt-control-background > .nxt-bg-repeat, .nxt-control-background > .nxt-bg-attachment").addClass("hidden")):"image"===d&&(b.container.find(".nxt-bg-image").removeClass("hidden"),b.container.find(".nxt-bg-color").addClass("hidden"),""!==b.setting._value["bg-image"]&&b.setting._value["bg-image"]!==void 0&&b.container.find(".nxt-control-background > .nxt-bg-size, .nxt-control-background > .nxt-bg-position, .nxt-control-background > .nxt-bg-repeat, .nxt-control-background > .nxt-bg-attachment").removeClass("hidden"))}),b.container.on("change",".nxt-bg-position select",function(){b.setData("bg-position",a(this).val())}),b.container.on("change",".nxt-bg-size select",function(){b.setData("bg-size",a(this).val())}),b.container.on("change",".nxt-bg-repeat select",function(){b.setData("bg-repeat",a(this).val())}),b.container.on("change",".nxt-bg-attachment select",function(){b.setData("bg-attachment",a(this).val())}),b.container.on("click",".bg-image-upload-button",function(a){var c=wp.media({multiple:!1}).open().on("select",function(){var a,d,e,f,g,h,i=c.state().get("selection").first(),j=i.toJSON().sizes.full.url;_.isUndefined(i.toJSON().sizes.medium)?!_.isUndefined(i.toJSON().sizes.thumbnail)&&(j=i.toJSON().sizes.thumbnail.url):j=i.toJSON().sizes.medium.url,a=i.toJSON().sizes.full.url,d=i.toJSON().id,e=i.toJSON().width,f=i.toJSON().height,""!==a&&b.container.find(".nxt-control-background > .nxt-bg-repeat, .nxt-control-background > .nxt-bg-position, .nxt-control-background > .nxt-bg-size, .nxt-control-background > .nxt-bg-attachment").removeClass("hidden"),b.setData("bg-image",a),g=b.container.find(".placeholder, .thumbnail"),h=b.container.find(".bg-image-upload-remove-button"),g.length&&g.removeClass().addClass("thumbnail thumbnail-image").html("<img src=\""+j+"\" alt=\"\" />"),h.length&&h.show()});a.preventDefault()}),b.container.on("click",".bg-image-upload-remove-button",function(a){var c,d;a.preventDefault(),b.setData("bg-image",""),c=b.container.find(".placeholder, .thumbnail"),d=b.container.find(".bg-image-upload-remove-button"),b.container.find(".nxt-control-background > .nxt-bg-repeat,.nxt-control-background > .nxt-bg-position,.nxt-control-background > .nxt-bg-size,.nxt-control-background > .nxt-bg-attachment").addClass("hidden"),c.length&&(c.innerHTML="",c.removeClass().addClass("placeholder").html(nexterControlBg.placeholder)),d.length&&d.hide()})},setData:function(b,c){var d=this,e=a("#customize-control-"+d.id.replace("[","-").replace("]","")+" .background-hidden-val"),f=d.setting._value;f[b]=c,a(e).attr("value",JSON.stringify(f)).trigger("change"),d.setting.set(f)}}),a(window).on("load",function(){a("html").addClass("colorpicker-ready")}),wp.customize.controlConstructor["nxt-color"]=wp.customize.Control.extend({ready:function(){var b=this,c=b.params.palette_setting_id||"",d=!(b.params.palette&&b.params.palette.length)||b.params.palette;this.container.find(".nxt-color-picker-alpha").wpColorPicker({alpha:!0,palettes:d,change:function(c,d){var e=c.target,f=d.color.toString();a("html").hasClass("colorpicker-ready")&&b.setting.set(f)},clear:function(c){var d=a(c.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0];d&&b.setting.set("")}})}}),wp.customize.controlConstructor["nxt-multi-checkbox"]=wp.customize.Control.extend({ready:function(){var b=this;b.container.on("change","input",function(){var c=[],d=0;a.each(b.params.choices,function(a){b.container.find("input[value=\""+a+"\"]").is(":checked")&&(c[d]=a,d++)}),b.setting.set(c)})}}),wp.customize.controlConstructor["nxt-responsive"]=wp.customize.Control.extend({ready:function(){var b,c=this;c.container.find(".nxt-responsive-devices button").on("click",function(){var b=a(this).attr("data-device");b="desktop"==b?"tablet":"tablet"==b?"mobile":"desktop",a(".wp-full-overlay-footer .devices button[data-device=\""+b+"\"]").trigger("click")}),this.container.on("change keyup paste",".nxt-responsive-number, .nxt-responsive-unit",function(){b=a(this).val(),c.setValue()}),this.container.on("blur","input",function(){b=a(this).val()||"",""==b&&wp.customize.previewer.refresh()})},setValue:function(){var b=this,c={};b.responsiveWrap=b.container.find(".nxt-responsive-control-wrap").first(),b.responsiveWrap.find(".nxt-responsive-number").each(function(){var b=a(this),d=b.data("id"),e=b.val();c[d]=e}),b.responsiveWrap.find(".nxt-responsive-unit").each(function(){var b=a(this),d=b.data("id"),e=b.val();c[d]=e}),b.setting.set(c)}}),wp.customize.controlConstructor["nxt-responsive-slider"]=wp.customize.Control.extend({ready:function(){let b=this.container;var c=this;let d=b[0].querySelectorAll(".nxt-slider-wrap");d.forEach(a=>{const d=document.createElement("style");d.setAttribute("name",b[0].id),a.appendChild(d);let e=a.querySelector("input[type=range]");c.fillChanges(b,e)}),c.container.on("click",".nxt-resp-slider-devices button",function(b){b.preventDefault();var c=a(this).attr("data-device");a(".wp-full-overlay-footer .devices button[data-device=\""+c+"\"]").trigger("click")}),c.container.on("change",".nxt-slider-units-devices",function(){var b=a(this).find("option:selected");if(b.hasClass("active"))return!1;a(this).find("option").removeClass("active"),b.addClass("active");var d=b.attr("data-unit"),e=a(".wp-full-overlay-footer .devices button.active").attr("data-device");c.container.find(".nxt-slider-unit-inner .nxt-slider-"+e+"-unit").val(d),c.setValue()}),this.container.on("input change","input[type=range]",function(){var d=a(this).val(),e=a(this).closest(".nxt-slider-wrap").find(".nxt-responsive-slider-number");e.val(d),e.trigger("change"),c.fillChanges(b,this)}),this.container.on("input change","input[type=number]",function(){var d=a(this).val();a(this).closest(".nxt-slider-wrap").find("input[type=range]").val(d),c.setValue(),c.fillChanges(b,this)})},fillChanges:function(a,b){const c=parseInt(b.min),d=parseInt(b.max),e=parseInt(b.value);let f=100*((e-c)/(d-c)),g=b.closest(".nxt-slider-wrap");const h=g.querySelector("style[name=\""+a[0].id+"\"]");let i=b.getAttribute("data-id");h.innerHTML="#"+a[0].id+" .nxt-slider-wrap."+i+" input[type=range]::-webkit-slider-runnable-track{ background: linear-gradient( to right, #162D9E "+f+"%, #E7E7F6 "+f+"% ) !important;} #"+a[0].id+" .nxt-slider-wrap."+i+" input[type=range]::-moz-range-track{ background: linear-gradient( to right, #162D9E "+f+"%, #E7E7F6 "+f+"% ) !important;} "},setValue:function(){var b=this,c={};b.responsiveContainer=b.container.find(".wrapper").first(),b.responsiveContainer.find(".nxt-responsive-slider-number").each(function(){var b=a(this),d=b.data("id"),e=b.val();c[d]=e}),b.responsiveContainer.find(".nxt-slider-unit-inner .nxt-slider-unit-hidden").each(function(){var b=a(this),d=b.attr("data-device"),e=b.val();c[d+"-unit"]=e}),b.setting.set(c)}}),wp.customize.controlConstructor["nxt-responsive-spacing"]=wp.customize.Control.extend({ready:function(){var b,c=this;c.nxtResponsiveInit(),this.container.on("change keyup paste","input.nxt-spacing-input",function(){b=a(this).val(),c.updateValue()})},updateValue:function(){var b=this,c={md:{},sm:{},xs:{},"md-unit":"px","sm-unit":"px","xs-unit":"px"};b.container.find("input.nxt-spacing-desktop").each(function(){var b=a(this),d=b.data("id"),e=b.val();c.md[d]=e}),b.container.find("input.nxt-spacing-tablet").each(function(){var b=a(this),d=b.data("id"),e=b.val();c.sm[d]=e}),b.container.find("input.nxt-spacing-mobile").each(function(){var b=a(this),d=b.data("id"),e=b.val();c.xs[d]=e}),b.container.find(".nxt-spacing-unit-inner .nxt-spacing-unit-hidden").each(function(){var b=a(this),d=b.attr("data-device"),e=b.val();c[d+"-unit"]=e}),b.setting.set(c)},nxtResponsiveInit:function(){var b=this;b.container.find(".nxt-resp-spacing-btns button").on("click",function(){var b=a(this).attr("data-device");a(".wp-full-overlay-footer .devices button[data-device=\""+b+"\"]").trigger("click")}),b.container.on("change",".nxt-spacing-units-devices",function(){var c=a(this).find("option:selected");if(c.hasClass("active"))return!1;a(this).find("option").removeClass("active"),c.addClass("active");var d=c.attr("data-unit"),e=a(".wp-full-overlay-footer .devices button.active").attr("data-device");b.container.find(".nxt-spacing-unit-inner .nxt-spacing-"+e+"-unit").val(d),b.updateValue()})}}),a(document).ready(function(){a(".nxt-spacing-input-link-unlink").on("click",function(){if(a(this).hasClass("disconnected"))a(this).parent(".nxt-spacing-devices").find("input").removeClass("connected").attr("data-element-connect",""),a(this).removeClass("disconnected");else{var b=a(this).data("element-connect");a(this).parent(".nxt-spacing-devices").find("input").addClass("connected").attr("data-element-connect",b),a(this).addClass("disconnected")}}),a(".nxt-spacing-input-item").on("input",".connected",function(){var b=a(this).attr("data-element-connect"),c=a(this).val();a(this).parent().parent(".nxt-spacing-devices").find(".connected[ data-element-connect=\""+b+"\" ]").each(function(){a(this).val(c).change()})})}),wp.customize.controlConstructor["nxt-slider"]=wp.customize.Control.extend({ready:function(){var b=this;let c=this.container,d=c[0].querySelectorAll(".nxt_slider_wrap");d.forEach(a=>{const d=document.createElement("style");d.setAttribute("name",c[0].id),a.appendChild(d);let e=a.querySelector("input[type=range]");b.fillChanges(c,e)}),b.container.on("input change","input[type=range]",function(){var d=a(this),e=d.val(),f=d.closest(".nxt_slider_wrap").find(".nxt_range_value .value");f.val(e),f.trigger("change"),b.fillChanges(c,this)}),a(".nxt-slider-reset").on("click",function(){var b=a(this).closest(".nxt_slider_wrap"),c=b.find("input[type=range]"),d=b.find(".nxt_range_value .value"),e=c.data("reset_value");c.val(e),d.val(e),d.change()}),b.container.on("input change","input[type=number]",function(){var d=a(this),e=d.val();d.closest(".nxt_slider_wrap").find("input[type=range]").val(e),b.setting.set(e),b.fillChanges(c,this)})},fillChanges:function(a,b){const c=b.min,d=b.max,e=b.value;let f=100*((e-c)/(d-c)),g=b.closest(".nxt_slider_wrap");const h=g.querySelector("style[name=\""+a[0].id+"\"]");h.innerHTML="#"+a[0].id+" .nxt_slider_wrap input[type=range]::-webkit-slider-runnable-track{ background: linear-gradient( to right, #162D9E "+f+"%, #E7E7F6 "+f+"% ) !important;} #"+a[0].id+" .nxt_slider_wrap input[type=range]::-moz-range-track{ background: linear-gradient( to right, #162D9E "+f+"%, #E7E7F6 "+f+"% ) !important;} "}}),wp.customize.controlConstructor["nxt-switcher"]=wp.customize.Control.extend({ready:function(){var b=this;let c=this.container[0].querySelector("input.switch-input");"off"==c.value&&(c.checked=!1),this.container.on("change","input.switch-input",function(c){c.preventDefault();var d=a(this).prop("checked");d&&"on"!==b.setting.get()?b.setting.set("on"):!d&&"off"!==b.setting.get()&&b.setting.set("off")}),b.setting.bind(function(a){var c=b.container.find("input.switch-input"),d=c.prop("checked");"on"!==a||d?"off"===a&&d&&c.prop("checked",!1):c.prop("checked",!0)})}}),wp.customize.controlConstructor["nxt-style"]=wp.customize.Control.extend({ready:function(){var b=this;this.container.on("change","input.radio-input",function(c){c.preventDefault(),b.setting.set(a(this).val())})}}),wp.customize.controlConstructor["nxt-color-palette"]=wp.customize.Control.extend({ready:function(){function b(){var a=JSON.stringify(k);l.val(a).trigger("change"),j.setting.set(k),c()}function c(){j.container.find(".nxt-color-swatch").each(function(){var b=parseInt(a(this).closest(".nxt-color-swatch-item").data("index"));isNaN(b)||k[b]===void 0||a(this).css("background-color",k[b])})}function d(a){return!!(a&&"string"==typeof a)&&(a=a.trim(),!!/^#[A-Fa-f0-9]{3}$|^#[A-Fa-f0-9]{6}$|^#[A-Fa-f0-9]{8}$/.test(a)||!!/^rgba?\s*\(\s*[\d.]+\s*,\s*[\d.]+\s*,\s*[\d.]+\s*(,\s*[\d.]+\s*)?\)$/.test(a)||!!/^hsla?\s*\(/.test(a))}function e(a){return a?(a+"").replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;"):""}function f(c){var d=j.container.find(".nxt-color-picker-"+c),e=d.closest(".nxt-color-picker-wrapper");if(d.length&&!d.hasClass("wp-color-picker-initialized")){var f="none"===e.css("display");f&&e.css({display:"block",visibility:"hidden",position:"absolute",left:"-9999px"}),d.wpColorPicker({alpha:!0,change:function(c,d){var e=d.color.toString(),f=parseInt(a(this).data("index"));k[f]!==void 0&&(k[f]=e,b())},clear:function(){var c=parseInt(a(this).data("index"));k[c]!==void 0&&(k[c]="#ffffff",b())}}),f&&e.css({display:"none",visibility:"",position:"",left:""}),d.addClass("wp-color-picker-initialized")}}function g(c){m=c;var f=k[c]||"#ffffff";o.empty();var g="nxt-color-picker-modal-"+j.id.replace(/[\[\]]/g,"-")+"-"+c,h=a("<input type=\"text\" id=\""+g+"\" name=\""+g+"\" class=\"nxt-modal-color-picker nxt-color-picker-alpha\" data-alpha=\"true\" value=\""+e(f)+"\" />");o.append(h),n.fadeIn(2);var i=j.container.find(".nxt-color-swatch-item[data-index=\""+c+"\"]");if(i.length){var l=i.offset(),p=l.left-300/2+i.outerWidth()/2;n.css({position:"fixed",left:Math.max(20,p)+"px",zIndex:1e5})}h.wpColorPicker({alpha:!0,change:function(a,c){var d=c.color.toString();0<=m&&void 0!==k[m]&&(k[m]=d,b())},clear:function(){0<=m&&void 0!==k[m]&&(k[m]="#ffffff",b())}}),h.val(f);var q=h.closest(".wp-picker-container").find(".wp-picker-input-wrap");if(q.removeClass("hidden").show(),h.on("input change",function(){var c=a(this).val().trim();c&&d(c)&&0<=m&&void 0!==k[m]&&(k[m]=c,b())}),h.data("wp-color-picker")&&h.iris("color",f),h.focus(),h.data("wp-color-picker")){var r=h.closest(".wp-picker-container").find(".wp-picker-holder");r.length&&r.show()}}function h(){var b=a(".nxt-color-palette-control").find(".wp-picker-holder");b.length&&b.hide(),n.fadeOut(5),m=-1;var c=o.find(".nxt-modal-color-picker");c.length&&c.data("wp-color-picker")&&c.wpColorPicker("close")}function i(){var c=j.container.find(".nxt-color-palette-swatches");c.find(".nxt-color-swatch-item:not(.nxt-add-color-item)").remove(),_.each(k,function(b,d){var g=e(b),h=(b+"").replace(/"/g,"\\\""),i=a("<div class=\"nxt-color-swatch-item\" data-index=\""+d+"\"><div class=\"nxt-color-swatch\" style=\"background-color: "+h+";\" data-color=\""+g+"\"><button type=\"button\" class=\"nxt-color-remove\" data-index=\""+d+"\" title=\"Remove Color\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"8\" height=\"8\" fill=\"none\" viewBox=\"0 0 6 6\"><path fill=\"#666\" d=\"M4.459 5.078 2.603 3.22.747 5.078a.437.437 0 1 1-.619-.619l1.856-1.856L.128.747A.438.438 0 0 1 .747.128l1.856 1.856L4.459.128a.438.438 0 0 1 .618.619L3.221 2.603l1.856 1.856a.437.437 0 1 1-.618.619\"/></svg></button></div><div class=\"nxt-color-picker-wrapper\"><input type=\"text\" class=\"nxt-color-picker-alpha color-picker-hex nxt-color-picker-"+d+"\" data-alpha=\"true\" data-index=\""+d+"\" value=\""+g+"\" style=\"display: none;\" /></div></div>");c.find(".nxt-add-color-item").before(i),setTimeout(function(){f(d)},50)}),b()}var j=this,k=[],l=j.container.find(".nxt-color-palette-value"),m=-1,n=j.container.find(".nxt-color-picker-modal"),o=j.container.find(".nxt-color-picker-wp-wrapper");if(j.setting._value&&Array.isArray(j.setting._value))k=j.setting._value.slice();else if(j.setting._value&&"string"==typeof j.setting._value)try{var p=JSON.parse(j.setting._value);k=Array.isArray(p)?p:[]}catch(a){k=[]}else j.params.default&&Array.isArray(j.params.default)&&(k=j.params.default.slice());j.container.on("click",".nxt-color-swatch",function(b){if(!a(b.target).closest(".nxt-color-remove").length){var c=parseInt(a(this).closest(".nxt-color-swatch-item").data("index"));isNaN(c)||g(c)}}),j.container.on("click",".nxt-color-remove",function(b){b.preventDefault(),b.stopPropagation();var c=parseInt(a(this).data("index"));1<k.length?(k.splice(c,1),i()):alert("You must have at least one color in the palette.")}),j.container.on("click",".nxt-add-color",function(a){a.preventDefault(),a.stopPropagation();k.length;k.push("#ffffff"),i()}),a(document).on("click",function(b){a(b.target).closest(".nxt-color-picker-modal").length||a(b.target).closest(".wp-picker-holder").length||a(b.target).closest(".nxt-color-swatch-item").length||a(b.target).closest(".wp-picker-container").length||h()}),function(){j.container.find(".nxt-color-picker-alpha").each(function(){var b=parseInt(a(this).data("index"));isNaN(b)||f(b)})}(),c()}}),a(" .wp-full-overlay-footer .devices button ").on("click",function(){var b=a(this).attr("data-device");a(".customize-control-nxt-responsive .nxt-responsive-control-wrap input, .customize-control .nxt-responsive-devices > li").removeClass("active"),a(".customize-control-nxt-responsive .nxt-responsive-control-wrap input."+b+", .customize-control .nxt-responsive-devices > li."+b).addClass("active"),a(".customize-control-nxt-responsive-slider .nxt-slider-wrap, .customize-control .nxt-resp-slider-devices > li").removeClass("active"),a(".customize-control-nxt-responsive-slider .nxt-slider-wrap."+b+", .customize-control .nxt-resp-slider-devices > li."+b).addClass("active"),a(".customize-control-nxt-responsive-spacing .nxt-spacing-inner-wrap .nxt-spacing-devices, .customize-control .nxt-resp-spacing-btns > li").removeClass("active"),a(".customize-control-nxt-responsive-spacing .nxt-spacing-inner-wrap .nxt-spacing-devices."+b+", .customize-control .nxt-resp-spacing-btns > li."+b).addClass("active")})})(jQuery);