!function(o){"use strict";o(window).on("load",function(){o("html").addClass("background-colorpicker-ready")}),wp.customize.controlConstructor["nxt-background"]=wp.customize.Control.extend({ready:function(){var a=this,t=a.setting._value,n=a.container.find(".nxt-color-control");!_.isUndefined(t["bg-image"])&&""!==t["bg-image"]||a.container.find(".nxt-control-background > .nxt-bg-size, .nxt-control-background > .nxt-bg-position, .nxt-control-background > .nxt-bg-repeat, .nxt-control-background > .nxt-bg-attachment").addClass("hidden"),a.container.on("click",".nxt-bg-reset",function(){var t=o(this).closest(".nxt-bg-type-list").find("input");t.prop("checked",!1),a.setData("bg-type",""),t.trigger("change"),a.container.find(".nxt-bg-image").addClass("hidden")}),n.wpColorPicker({change:function(){o("html").hasClass("background-colorpicker-ready")&&setTimeout(function(){a.setData("bg-color",n.val())},100)},clear:function(t){o(t.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0]&&a.setData("bg-color","")}}),a.container.on("change",".nxt-bg-type-list input",function(t){t.preventDefault();t=o(this).val();a.setData("bg-type",t),"color"===t?(a.container.find(".nxt-bg-color").removeClass("hidden"),a.container.find(".nxt-bg-image").addClass("hidden"),a.container.find(".nxt-control-background > .nxt-bg-size, .nxt-control-background > .nxt-bg-position, .nxt-control-background > .nxt-bg-repeat, .nxt-control-background > .nxt-bg-attachment").addClass("hidden")):"image"===t&&(a.container.find(".nxt-bg-image").removeClass("hidden"),a.container.find(".nxt-bg-color").addClass("hidden"),""!==a.setting._value["bg-image"]&&void 0!==a.setting._value["bg-image"]&&a.container.find(".nxt-control-background > .nxt-bg-size, .nxt-control-background > .nxt-bg-position, .nxt-control-background > .nxt-bg-repeat, .nxt-control-background > .nxt-bg-attachment").removeClass("hidden"))}),a.container.on("change",".nxt-bg-position select",function(){a.setData("bg-position",o(this).val())}),a.container.on("change",".nxt-bg-size select",function(){a.setData("bg-size",o(this).val())}),a.container.on("change",".nxt-bg-repeat select",function(){a.setData("bg-repeat",o(this).val())}),a.container.on("change",".nxt-bg-attachment select",function(){a.setData("bg-attachment",o(this).val())}),a.container.on("click",".bg-image-upload-button",function(t){var i=wp.media({multiple:!1}).open().on("select",function(){var t,n=i.state().get("selection").first(),e=n.toJSON().sizes.full.url;_.isUndefined(n.toJSON().sizes.medium)?_.isUndefined(n.toJSON().sizes.thumbnail)||(e=n.toJSON().sizes.thumbnail.url):e=n.toJSON().sizes.medium.url,t=n.toJSON().sizes.full.url,n.toJSON().id,n.toJSON().width,n.toJSON().height,""!==t&&a.container.find(".nxt-control-background > .nxt-bg-repeat, .nxt-control-background > .nxt-bg-position, .nxt-control-background > .nxt-bg-size, .nxt-control-background > .nxt-bg-attachment").removeClass("hidden"),a.setData("bg-image",t),n=a.container.find(".placeholder, .thumbnail"),t=a.container.find(".bg-image-upload-remove-button"),n.length&&n.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+e+'" alt="" />'),t.length&&t.show()});t.preventDefault()}),a.container.on("click",".bg-image-upload-remove-button",function(t){var n;t.preventDefault(),a.setData("bg-image",""),n=a.container.find(".placeholder, .thumbnail"),t=a.container.find(".bg-image-upload-remove-button"),a.container.find(".nxt-control-background > .nxt-bg-repeat,.nxt-control-background > .nxt-bg-position,.nxt-control-background > .nxt-bg-size,.nxt-control-background > .nxt-bg-attachment").addClass("hidden"),n.length&&(n.innerHTML="",n.removeClass().addClass("placeholder").html(nexterControlBg.placeholder)),t.length&&t.hide()})},setData:function(t,n){var e=this,i=o("#customize-control-"+e.id.replace("[","-").replace("]","")+" .background-hidden-val"),a=e.setting._value;a[t]=n,o(i).attr("value",JSON.stringify(a)).trigger("change"),e.setting.set(a)}}),o(window).on("load",function(){o("html").addClass("colorpicker-ready")}),wp.customize.controlConstructor["nxt-color"]=wp.customize.Control.extend({ready:function(){var e=this;this.container.find(".nxt-color-picker-alpha").wpColorPicker({change:function(t,n){t.target;n=n.color.toString();o("html").hasClass("colorpicker-ready")&&e.setting.set(n)},clear:function(t){o(t.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0]&&e.setting.set("")}})}}),wp.customize.controlConstructor["nxt-multi-checkbox"]=wp.customize.Control.extend({ready:function(){var a=this;a.container.on("change","input",function(){var e=[],i=0;o.each(a.params.choices,function(t,n){a.container.find('input[value="'+t+'"]').is(":checked")&&(e[i]=t,i++)}),a.setting.set(e)})}}),wp.customize.controlConstructor["nxt-responsive"]=wp.customize.Control.extend({ready:function(){var t=this;t.container.find(".nxt-responsive-devices button").on("click",function(t){var n=o(this).attr("data-device");o('.wp-full-overlay-footer .devices button[data-device="'+(n="desktop"==n?"tablet":"tablet"==n?"mobile":"desktop")+'"]').trigger("click")}),this.container.on("change keyup paste",".nxt-responsive-number, .nxt-responsive-unit",function(){o(this).val(),t.setValue()}),this.container.on("blur","input",function(){""==(o(this).val()||"")&&wp.customize.previewer.refresh()})},setValue:function(){var t=this,e={};t.responsiveWrap=t.container.find(".nxt-responsive-control-wrap").first(),t.responsiveWrap.find(".nxt-responsive-number").each(function(){var t=o(this),n=t.data("id"),t=t.val();e[n]=t}),t.responsiveWrap.find(".nxt-responsive-unit").each(function(){var t=o(this),n=t.data("id"),t=t.val();e[n]=t}),t.setting.set(e)}}),wp.customize.controlConstructor["nxt-responsive-slider"]=wp.customize.Control.extend({ready:function(){let e=this.container;var i=this;let t=e[0].querySelectorAll(".nxt-slider-wrap");t.forEach(t=>{const n=document.createElement("style");n.setAttribute("name",e[0].id),t.appendChild(n);t=t.querySelector("input[type=range]");i.fillChanges(e,t)}),i.container.on("click",".nxt-resp-slider-devices button",function(t){t.preventDefault();t=o(this).attr("data-device");o('.wp-full-overlay-footer .devices button[data-device="'+t+'"]').trigger("click")}),i.container.on("change",".nxt-slider-units-devices",function(){var t=o(this).find("option:selected");if(t.hasClass("active"))return!1;o(this).find("option").removeClass("active"),t.addClass("active");var n=t.attr("data-unit"),t=o(".wp-full-overlay-footer .devices button.active").attr("data-device");i.container.find(".nxt-slider-unit-inner .nxt-slider-"+t+"-unit").val(n),i.setValue()}),this.container.on("input change","input[type=range]",function(){var t=o(this).val(),n=o(this).closest(".nxt-slider-wrap").find(".nxt-responsive-slider-number");n.val(t),n.trigger("change"),i.fillChanges(e,this)}),this.container.on("input change","input[type=number]",function(){var t=o(this).val();o(this).closest(".nxt-slider-wrap").find("input[type=range]").val(t),i.setValue(),i.fillChanges(e,this)})},fillChanges:function(t,n){var e=parseInt(n.min),i=parseInt(n.max),e=(parseInt(n.value)-e)/(i-e)*100;let a=n.closest(".nxt-slider-wrap");const o=a.querySelector('style[name="'+t[0].id+'"]');n=n.getAttribute("data-id");o.innerHTML="#"+t[0].id+" .nxt-slider-wrap."+n+" input[type=range]::-webkit-slider-runnable-track{ background: linear-gradient( to right, #162D9E "+e+"%, #E7E7F6 "+e+"% ) !important;} #"+t[0].id+" .nxt-slider-wrap."+n+" input[type=range]::-moz-range-track{ background: linear-gradient( to right, #162D9E "+e+"%, #E7E7F6 "+e+"% ) !important;} "},setValue:function(){var t=this,e={};t.responsiveContainer=t.container.find(".wrapper").first(),t.responsiveContainer.find(".nxt-responsive-slider-number").each(function(){var t=o(this),n=t.data("id"),t=t.val();e[n]=t}),t.responsiveContainer.find(".nxt-slider-unit-inner .nxt-slider-unit-hidden").each(function(){var t=o(this),n=t.attr("data-device"),t=t.val();e[n+"-unit"]=t}),t.setting.set(e)}}),wp.customize.controlConstructor["nxt-responsive-spacing"]=wp.customize.Control.extend({ready:function(){var t=this;t.nxtResponsiveInit(),this.container.on("change keyup paste","input.nxt-spacing-input",function(){o(this).val(),t.updateValue()})},updateValue:function(){var t=this,e={md:{},sm:{},xs:{},"md-unit":"px","sm-unit":"px","xs-unit":"px"};t.container.find("input.nxt-spacing-desktop").each(function(){var t=o(this),n=t.data("id"),t=t.val();e.md[n]=t}),t.container.find("input.nxt-spacing-tablet").each(function(){var t=o(this),n=t.data("id"),t=t.val();e.sm[n]=t}),t.container.find("input.nxt-spacing-mobile").each(function(){var t=o(this),n=t.data("id"),t=t.val();e.xs[n]=t}),t.container.find(".nxt-spacing-unit-inner .nxt-spacing-unit-hidden").each(function(){var t=o(this),n=t.attr("data-device"),t=t.val();e[n+"-unit"]=t}),t.setting.set(e)},nxtResponsiveInit:function(){var e=this;e.container.find(".nxt-resp-spacing-btns button").on("click",function(t){var n=o(this).attr("data-device");o('.wp-full-overlay-footer .devices button[data-device="'+n+'"]').trigger("click")}),e.container.on("change",".nxt-spacing-units-devices",function(){var t=o(this).find("option:selected");if(t.hasClass("active"))return!1;o(this).find("option").removeClass("active"),t.addClass("active");var n=t.attr("data-unit"),t=o(".wp-full-overlay-footer .devices button.active").attr("data-device");e.container.find(".nxt-spacing-unit-inner .nxt-spacing-"+t+"-unit").val(n),e.updateValue()})}}),o(document).ready(function(){o(".nxt-spacing-input-link-unlink").on("click",function(){var t;o(this).hasClass("disconnected")?(o(this).parent(".nxt-spacing-devices").find("input").removeClass("connected").attr("data-element-connect",""),o(this).removeClass("disconnected")):(t=o(this).data("element-connect"),o(this).parent(".nxt-spacing-devices").find("input").addClass("connected").attr("data-element-connect",t),o(this).addClass("disconnected"))}),o(".nxt-spacing-input-item").on("input",".connected",function(){var t=o(this).attr("data-element-connect"),e=o(this).val();o(this).parent().parent(".nxt-spacing-devices").find('.connected[ data-element-connect="'+t+'" ]').each(function(t,n){o(this).val(e).change()})})}),wp.customize.controlConstructor["nxt-slider"]=wp.customize.Control.extend({ready:function(){var e=this;let i=this.container,t=i[0].querySelectorAll(".nxt_slider_wrap");t.forEach(t=>{const n=document.createElement("style");n.setAttribute("name",i[0].id),t.appendChild(n);t=t.querySelector("input[type=range]");e.fillChanges(i,t)}),e.container.on("input change","input[type=range]",function(){var t=o(this),n=t.val(),t=t.closest(".nxt_slider_wrap").find(".nxt_range_value .value");t.val(n),t.trigger("change"),e.fillChanges(i,this)}),o(".nxt-slider-reset").on("click",function(){var t=o(this).closest(".nxt_slider_wrap"),n=t.find("input[type=range]"),e=t.find(".nxt_range_value .value"),t=n.data("reset_value");n.val(t),e.val(t),e.change()}),e.container.on("input change","input[type=number]",function(){var t=o(this),n=t.val();t.closest(".nxt_slider_wrap").find("input[type=range]").val(n),e.setting.set(n),e.fillChanges(i,this)})},fillChanges:function(t,n){var e=n.min,i=n.max,e=(n.value-e)/(i-e)*100;let a=n.closest(".nxt_slider_wrap");const o=a.querySelector('style[name="'+t[0].id+'"]');o.innerHTML="#"+t[0].id+" .nxt_slider_wrap input[type=range]::-webkit-slider-runnable-track{ background: linear-gradient( to right, #162D9E "+e+"%, #E7E7F6 "+e+"% ) !important;} #"+t[0].id+" .nxt_slider_wrap input[type=range]::-moz-range-track{ background: linear-gradient( to right, #162D9E "+e+"%, #E7E7F6 "+e+"% ) !important;} "}}),wp.customize.controlConstructor["nxt-switcher"]=wp.customize.Control.extend({ready:function(){var i=this;let t=this.container[0].querySelector("input.switch-input");"off"==t.value&&(t.checked=!1),this.container.on("change","input.switch-input",function(t){t.preventDefault();t=o(this).prop("checked");t&&"on"!==i.setting.get()?i.setting.set("on"):t||"off"===i.setting.get()||i.setting.set("off")}),i.setting.bind(function(t){var n=i.container.find("input.switch-input"),e=n.prop("checked");"on"!==t||e?"off"===t&&e&&n.prop("checked",!1):n.prop("checked",!0)})}}),wp.customize.controlConstructor["nxt-style"]=wp.customize.Control.extend({ready:function(){var n=this;this.container.on("change","input.radio-input",function(t){t.preventDefault(),n.setting.set(o(this).val())})}}),o(" .wp-full-overlay-footer .devices button ").on("click",function(){var t=o(this).attr("data-device");o(".customize-control-nxt-responsive .nxt-responsive-control-wrap input, .customize-control .nxt-responsive-devices > li").removeClass("active"),o(".customize-control-nxt-responsive .nxt-responsive-control-wrap input."+t+", .customize-control .nxt-responsive-devices > li."+t).addClass("active"),o(".customize-control-nxt-responsive-slider .nxt-slider-wrap, .customize-control .nxt-resp-slider-devices > li").removeClass("active"),o(".customize-control-nxt-responsive-slider .nxt-slider-wrap."+t+", .customize-control .nxt-resp-slider-devices > li."+t).addClass("active"),o(".customize-control-nxt-responsive-spacing .nxt-spacing-inner-wrap .nxt-spacing-devices, .customize-control .nxt-resp-spacing-btns > li").removeClass("active"),o(".customize-control-nxt-responsive-spacing .nxt-spacing-inner-wrap .nxt-spacing-devices."+t+", .customize-control .nxt-resp-spacing-btns > li."+t).addClass("active")})}(jQuery);